apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: v-learning-vs
  namespace: v-learning
spec:
  hosts:
  - "v-learning.local"
  gateways:
  - v-learning-gateway
  http:
  - match:
    - uri:
        prefix: /api/users
    route:
    - destination:
        host: user-service
        port:
          number: 8081
  - match:
    - uri:
        prefix: /api/courses
    route:
    - destination:
        host: course-service
        port:
          number: 8082
  - match:
    - uri:
        prefix: /api/content
    route:
    - destination:
        host: content-service
        port:
          number: 8083
  - match:
    - uri:
        prefix: /api/enrollments
    route:
    - destination:
        host: enrollment-service
        port:
          number: 8084
  - match:
    - uri:
        prefix: /api/certificates
    route:
    - destination:
        host: certificate-service
        port:
          number: 8085
  - route:
    - destination:
        host: frontend
        port:
          number: 4200
